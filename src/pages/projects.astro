---
import BaseLayout from "@/layouts/BaseLayout.astro";
---
<script>
  import { projects } from "@/projects";
  function calculateValue(index: number, length: number) {
    const midpointIndex = Math.floor(length / 2);
    if (index <= midpointIndex) {
      const value = (midpointIndex - index) * 10 + 10;
      return value;
    }
    if (index > midpointIndex) {
      const value = -1 * (index - midpointIndex) * 10;
      return value;
    }
  }
  // for (let i = 0; i < 6; i++) {
  // console.log(calculateValue(i, 6));
  // }
  function exec() {
    let ticker = 1;
    let len = projects.length;
    const container = document.getElementById("container");
    for (const project of projects) {
      const div = document.createElement("div");
      div.classList.add("p-2", "border", "opacity-0");
      div.style.animation = `unblur-in 0.3s linear forwards`;
      div.style.animationDelay = `${ticker * 0.1}s`;
      // console.log(calculateValue(ticker, len));
      div.style.transform = `perspective(1000px) rotateX(${calculateValue(ticker, len) * 0.2}deg) translateZ(${Math.abs(calculateValue(ticker, len)) * -3}px)`;
      ticker++;
      div.innerHTML = `
      <h1 class="text-3xl">${project.name}</h1>
      <p>${project.description}</p>
      <a href="${project.link}" target="_blank" class="text-teal-400 hover:underline py-2">${project.link}</a>
    `;
      container.appendChild(div);
    }
  }
  exec();
  </script>
<BaseLayout>
  <div id="top-center">
    <a class="bg-black border text-3xl" href="/">ü°ê Back</a>
  </div>
  <div
    class="flex flex-wrap justify-between pt-20 md:pt-0 md:px-20 w-screen items-center"
  >
    <div id="container" class="min-h-screen md:pt-60 flex flex-col gap-2"></div>
  </div>
</BaseLayout>
<style>
  @keyframes unblur-in {
    0% {
      filter: blur(10px);
      opacity: 0;
    }
    100% {
      filter: blur(0);
      opacity: 1;
    }
  }
</style>
<style>
  #top-center {
    position: fixed;
    z-index: 99;
    top: 4rem;
    left: 50%;
    transform: translateX(-50%) perspective(1000px) rotateX(30deg);
  }
  #top-center a {
    padding: 1rem 2rem;
    transition: all 0.2s;
  }
  #top-center:hover a {
    opacity: 0.5;
  }
</style>
